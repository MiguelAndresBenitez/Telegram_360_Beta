================================================================================
‚ö° RESUMEN R√ÅPIDO - INSTALACI√ìN NATIVA + TELETHON
================================================================================

Tu caso: CloudPanel (nativo) + Telegram 360
Tiempo: ~45 minutos

================================================================================
PROBLEMA: Las sesiones de Telegram (.session files) no se subieron
================================================================================

¬øPor qu√©?
- Son archivos sensibles (credenciales cifradas)
- Nunca se suben a GitHub
- Deben generarse EN EL SERVIDOR

Soluci√≥n: Hay 3 opciones

================================================================================
OPCI√ìN A: GENERAR EN EL SERVIDOR (Recomendado)
================================================================================

Ventaja: ‚úÖ M√°s seguro, no copias archivos sensibles
Desventaja: ‚ùå Necesitas acceso interactivo al servidor

Pasos:

1. SSH al servidor
   $ ssh root@IP_SERVIDOR

2. Convertirse en usuario telegramapp
   $ su - telegramapp

3. Entrar a directorio
   $ cd ~/app

4. Activar venv
   $ source venv/bin/activate

5. Ejecutar script
   $ python deploy/init_telegram_session.py

6. Ingresar tel√©fono de Telegram (con +)
   >>> Ingresa tu n√∫mero: +34666777888

7. Ingresar c√≥digo de verificaci√≥n
   >>> C√≥digo recibido por Telegram: 12345

8. Si tienes 2FA, ingresar contrase√±a
   >>> Contrase√±a: tucontrase√±a

‚úÖ Listo - archivo plataforma_session.session creado en servidor

================================================================================
OPCI√ìN B: COPIAR DESDE TU M√ÅQUINA LOCAL
================================================================================

Ventaja: ‚úÖ R√°pido si ya tienes la sesi√≥n
Desventaja: ‚ùå Riesgo si transmites archivo sensible

Pasos:

1. Buscar el archivo localmente

Linux/Mac:
$ find ~ -name "*.session" 2>/dev/null | grep -E "(telegram|plataforma)"

Windows:
Buscar en C:\Users\tu_usuario\ recursivamente

T√≠picas ubicaciones:
/Users/miguel/.local/share/telethon/
/home/miguel/project/
C:\Users\Miguel\AppData\Local\telethon\

2. Una vez localizado: copiar al servidor

$ scp /path/local/plataforma_session.session root@IP_SERVIDOR:/home/telegramapp/app/

3. Dar permisos

$ ssh root@IP_SERVIDOR
# root@servidor:~# chmod 600 /home/telegramapp/app/plataforma_session.session
# root@servidor:~# chown telegramapp:telegramapp /home/telegramapp/app/plataforma_session.session

‚úÖ Listo

================================================================================
OPCI√ìN C: GENERAR EN DOCKER LOCAL, LUEGO COPIAR
================================================================================

Ventaja: ‚úÖ Genera sesi√≥n nueva y segura
Desventaja: ‚ùå M√°s pasos

Pasos:

1. En tu m√°quina local:
   $ docker build -f Dockerfile.session -t telegram-session .
   $ docker run -it -v $(pwd):/app telegram-session

2. Ingresa credenciales cuando pida (c√≥digo de verificaci√≥n)

3. Copiar archivo al servidor:
   $ scp plataforma_session.session root@IP_SERVIDOR:/home/telegramapp/app/

‚úÖ Listo

================================================================================
MI RECOMENDACI√ìN PARA TI
================================================================================

‚úÖ OPCI√ìN A (GENERAR EN SERVIDOR)

Raz√≥n:
1. M√°s seguro - no transmites credenciales
2. M√°s f√°cil - todo en un comando
3. M√°s limpio - la sesi√≥n se genera directamente donde se usa

Pasos simples:

1. Instalar con script:
   sudo bash install-native.sh

2. Cuando termina, SSH y ejecuta:
   su - telegramapp
   cd ~/app && source venv/bin/activate
   python deploy/init_telegram_session.py

3. Listo - sesi√≥n creada

================================================================================
¬øD√ìNDE PONER LOS DATOS DE TELEGRAM?
================================================================================

Necesitas agregar a .env.prod en el servidor:

TELEGRAM_API_ID=1234567                    # De my.telegram.org
TELEGRAM_API_HASH=abcdef0123456789abc      # De my.telegram.org  
TELEGRAM_PHONE=+34666777888                # Tu n√∫mero con +

Pasos para obtener:

1. Ir a https://my.telegram.org/apps
2. Login con tu n√∫mero
3. Crear nueva aplicaci√≥n
4. Copiar: api_id y api_hash
5. Guardar en .env.prod

================================================================================
FLUJO COMPLETO PARA TI
================================================================================

1Ô∏è‚É£  LIMPIAR ARCHIVOS LOCALES

bash limpiar.sh    # O ejecutar comandos manualmente

Eliminar:
- .git/
- docker-compose*.yml
- Dockerfile*
- .env.prod (no, solo .env.prod.example)
- *.session files

2Ô∏è‚É£  CREAR ZIP

zip -r telegram_360_deploy.zip telegram_360/ \
    -x "telegram_360/.git/*" \
    "telegram_360/docker-compose*" \
    "telegram_360/node_modules/*" \
    "telegram_360/**/*.session"

3Ô∏è‚É£  SUBIR A SERVIDOR

scp telegram_360_deploy.zip root@IP_SERVIDOR:/home/

4Ô∏è‚É£  EN EL SERVIDOR

ssh root@IP_SERVIDOR

# Descomprimir
unzip /home/telegram_360_deploy.zip -d /home/
cd telegram_360

# Ejecutar script (automatiza CASI todo)
sudo bash install-native.sh

# Espera 45 minutos...

5Ô∏è‚É£  GENERAR SESI√ìN DE TELEGRAM

su - telegramapp
cd ~/app && source venv/bin/activate
python deploy/init_telegram_session.py
# Ingresa tel√©fono: +34666777888
# Ingresa c√≥digo: [recibido en Telegram]

6Ô∏è‚É£  VERIFICAR TODO FUNCIONA

curl http://localhost:8000/api/docs
curl https://cliente.com

‚úÖ Sistema en producci√≥n

================================================================================
ARCHIVOS CREADOS PARA TI
================================================================================

üìÑ INSTALLATION_NATIVE.txt      ‚Üê Gu√≠a detallada (copia esto)
üìÑ TELETHON_SETUP.txt           ‚Üê Solo Telethon/sesiones
üìÑ install-native.sh            ‚Üê Script automatizado (chmod +x)
üìÑ deploy/nginx_native.conf     ‚Üê Configuraci√≥n nginx
üìÑ deploy/supervisord_native.conf ‚Üê Gesti√≥n de procesos
üìÑ FILES_TO_DELETE_NATIVE.txt   ‚Üê Qu√© eliminar antes de desplegar
üìÑ CLIENT_CONFIGURATION.txt     ‚Üê Variables a cambiar

Est√°n en GitHub:
https://github.com/MiguelAndresBenitez/Telegram_360_Beta

================================================================================
COMANDOS CLAVE A RECORDAR
================================================================================

EN SERVIDOR - Ver estado:
$ sudo supervisorctl status

EN SERVIDOR - Logs:
$ tail -f /home/telegramapp/app/logs/backend.log
$ tail -f /home/telegramapp/app/logs/workers.log

EN SERVIDOR - Reiniciar:
$ sudo supervisorctl restart telegram

EN SERVIDOR - Crear sesi√≥n:
$ su - telegramapp && cd ~/app && source venv/bin/activate && python deploy/init_telegram_session.py

DESDE TU PC - Copiar sesi√≥n:
$ scp /path/local/session.session root@servidor:/home/telegramapp/app/

================================================================================
¬øPREGUNTAS FRECUENTES?
================================================================================

‚ùì ¬øDocker o Nativo?
‚úÖ Nativo (Opci√≥nB) - CloudPanel lo ejecuta directamente en SO

‚ùì ¬øCu√°nto tarda la instalaci√≥n?
‚è± ~45 minutos (script automatizado)

‚ùì ¬øMemoria suficiente?
‚úì 4GB es ajustado pero suficiente

‚ùì ¬øLas sesiones expirar?
‚úÖ Generalmente duran meses/a√±os
‚ùå Si la eliminas o cambia contrase√±a de Telegram, necesitas regenerar

‚ùì ¬øPuedo usar misma sesi√≥n en m√∫ltiples servidores?
‚ùå NO - Telegram la cerrar√° por m√∫ltiples conexiones

‚ùì ¬øQu√© pasa con los archivos Docker?
üóëÔ∏è  Eliminar - CloudPanel no los usa

‚ùì ¬øC√≥mo actualizar despu√©s?
1. git pull en servidor
2. Recompile frontend si cambi√≥
3. supervisorctl restart telegram

================================================================================
SIGUIENTES PASOS INMEDIATOS
================================================================================

1. Lee: INSTALLATION_NATIVE.txt (la gu√≠a completa)
2. Lee: TELETHON_SETUP.txt (solo sesiones)
3. Haz: Limpiar archivos Docker locales
4. Haz: Crear ZIP
5. Haz: Subir a servidor
6. Haz: Ejecutar install-native.sh
7. Haz: Generar sesi√≥n de Telegram
8. ‚úÖ Sistema en producci√≥n

================================================================================
